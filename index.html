<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>å¶æ˜Ÿæ˜Ÿ Â· 3D ç²’å­å…‰æ•ˆç”Ÿæ—¥å¿«ä¹</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", sans-serif;
      height: 100vh;
      overflow: hidden;
      color: #fff;
      background: radial-gradient(circle at 10% 0%, #ff9a9e 0%, #fad0c4 25%, #fbc2eb 50%, #a6c1ee 75%, #89f7fe 100%);
      background-size: 300% 300%;
      animation: gradient-flow 20s ease-in-out infinite;
    }

    @keyframes gradient-flow {
      0%   { background-position: 0% 0%; }
      50%  { background-position: 100% 100%; }
      100% { background-position: 0% 0%; }
    }

    /* ç²’å­å…‰æ•ˆç”»å¸ƒ */
    #particles {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .scene {
      position: relative;
      width: 100%;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      perspective: 1200px;
      overflow: hidden;
      z-index: 1; /* åœ¨ç²’å­ä¹‹ä¸Š */
    }

    /* èƒŒæ™¯å…‰æ™• */
    .scene::before {
      content: "";
      position: absolute;
      width: 80vmax;
      height: 80vmax;
      background: radial-gradient(circle, rgba(255,255,255,0.35), transparent 60%);
      filter: blur(18px);
      mix-blend-mode: screen;
      top: -20vmax;
      left: -20vmax;
      opacity: 0.7;
      animation: halo-move 18s linear infinite alternate;
    }

    @keyframes halo-move {
      0%   { transform: translate3d(0, 0, 0); }
      100% { transform: translate3d(10vmax, 10vmax, 0); }
    }

    /* ä¸‰ç»´æ—‹è½¬å…‰ç¯ */
    .ring {
      position: absolute;
      border-radius: 999px;
      border: 1.6px solid rgba(255, 255, 255, 0.65);
      box-shadow: 0 0 18px rgba(255,255,255,0.45);
      opacity: 0.6;
      transform-style: preserve-3d;
      z-index: 0;
    }

    .ring-1 {
      width: 420px;
      height: 420px;
      top: 12%;
      left: 8%;
      animation: ring-spin-1 26s linear infinite;
    }

    .ring-2 {
      width: 520px;
      height: 520px;
      bottom: -6%;
      right: 4%;
      animation: ring-spin-2 32s linear infinite;
    }

    @keyframes ring-spin-1 {
      0%   { transform: rotateX(72deg) rotateZ(0deg) translateZ(-140px); }
      50%  { transform: rotateX(72deg) rotateZ(180deg) translateZ(-80px); }
      100% { transform: rotateX(72deg) rotateZ(360deg) translateZ(-140px); }
    }

    @keyframes ring-spin-2 {
      0%   { transform: rotateX(68deg) rotateZ(0deg) translateZ(-160px); }
      50%  { transform: rotateX(68deg) rotateZ(-200deg) translateZ(-90px); }
      100% { transform: rotateX(68deg) rotateZ(-360deg) translateZ(-160px); }
    }

    /* çº¸å±‘å®¹å™¨ */
    #confetti-container {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .confetti {
      position: absolute;
      top: -12vh;
      border-radius: 2px;
      opacity: 0;
      transform-origin: center;
      animation: confetti-fall linear infinite;
      will-change: transform, opacity;
    }

    @keyframes confetti-fall {
      0% {
        transform: translate3d(0, -110vh, 0) rotateX(0deg) rotateZ(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      100% {
        transform: translate3d(0, 120vh, 0) rotateX(360deg) rotateZ(720deg);
        opacity: 0;
      }
    }

    /* ä¸­é—´ 3D å¡ç‰‡ */
    .card-3d {
      position: relative;
      z-index: 3;
      width: min(560px, 92vw);
      padding: 30px 32px 34px;
      border-radius: 26px;
      background: radial-gradient(circle at 0% 0%, rgba(255,255,255,0.35), rgba(255,255,255,0.06));
      backdrop-filter: blur(18px);
      box-shadow:
        0 22px 45px rgba(0,0,0,0.35),
        0 0 20px rgba(255,255,255,0.4);
      transform-style: preserve-3d;
      transform-origin: center;
      transition: transform 0.35s ease-out, box-shadow 0.35s ease-out;
      animation: card-in 1.1s ease-out forwards;
      text-align: center;
    }

    .card-3d::before {
      content: "";
      position: absolute;
      inset: -2px;
      border-radius: inherit;
      border: 1px solid rgba(255,255,255,0.7);
      opacity: 0.5;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    @keyframes card-in {
      0% {
        opacity: 0;
        transform: translate3d(0, 50px, 0) scale(0.92) rotateX(10deg);
      }
      100% {
        opacity: 1;
        transform: translate3d(0, 0, 0) scale(1) rotateX(0deg);
      }
    }

    .layer-depth-3 { transform: translateZ(70px); }
    .layer-depth-2 { transform: translateZ(45px); }
    .layer-depth-1 { transform: translateZ(25px); }
    .layer-depth-0 { transform: translateZ(5px); }

    .date-tag {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.7);
      font-size: 13px;
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 10px;
      background: rgba(0, 0, 0, 0.25);
      box-shadow: 0 0 12px rgba(0,0,0,0.35);
    }

    .card-3d h1 {
      font-size: 34px;
      letter-spacing: 4px;
      margin-bottom: 6px;
      text-shadow:
        0 0 10px rgba(0,0,0,0.6),
        0 4px 10px rgba(0,0,0,0.5);
    }

    .card-3d h2 {
      font-size: 20px;
      margin-bottom: 18px;
      font-weight: 500;
      opacity: 0.95;
    }

    .highlight-name {
      color: #ffe66d;
      font-weight: 800;
      text-shadow:
        0 0 12px rgba(255,255,255,0.7),
        0 0 20px rgba(255,230,109,0.9);
    }

    .cake {
      font-size: 46px;
      margin: 8px 0 6px;
      animation: cake-breath 1.9s ease-in-out infinite;
      filter: drop-shadow(0 0 10px rgba(255,255,255,0.9));
    }

    @keyframes cake-breath {
      0%   { transform: translateZ(70px) translateY(0) scale(1);   opacity: 0.92; }
      50%  { transform: translateZ(70px) translateY(-4px) scale(1.08); opacity: 1; }
      100% { transform: translateZ(70px) translateY(0) scale(1);   opacity: 0.92; }
    }

    .typewriter {
      margin: 8px auto 6px;
      font-size: 16px;
      line-height: 1.7;
      min-height: 3.2em;
      white-space: pre-wrap;
      text-align: center;
      text-shadow: 0 1px 4px rgba(0,0,0,0.45);
    }

    .sub-text {
      font-size: 13px;
      opacity: 0.9;
      margin-top: 4px;
      text-shadow: 0 1px 4px rgba(0,0,0,0.4);
    }

    .footer {
      margin-top: 20px;
      font-size: 12px;
      opacity: 0.9;
      text-shadow: 0 1px 4px rgba(0,0,0,0.45);
    }

    .footer span {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.25);
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    @media (max-width: 480px) {
      .card-3d {
        padding: 22px 18px 24px;
        border-radius: 20px;
      }
      .card-3d h1 {
        font-size: 26px;
        letter-spacing: 2px;
      }
      .card-3d h2 {
        font-size: 16px;
      }
      .cake {
        font-size: 38px;
      }
    }
  </style>
</head>
<body>
  <!-- ç²’å­å…‰æ•ˆç”»å¸ƒ -->
  <canvas id="particles"></canvas>

  <div class="scene" id="scene">
    <!-- èƒŒæ™¯ä¸‰ç»´å…‰ç¯ -->
    <div class="ring ring-1"></div>
    <div class="ring ring-2"></div>

    <!-- äº”å½©çº¸å±‘ -->
    <div id="confetti-container"></div>

    <!-- 3D ç”Ÿæ—¥å¡ç‰‡ -->
    <div class="card-3d" id="card3d">
      <div class="date-tag layer-depth-1">ğŸ‚ BIRTHDAY Â· 12 Â· 25</div>

      <h1 class="layer-depth-3">
        <span class="highlight-name">å¶æ˜Ÿæ˜Ÿ</span> Â· ç”Ÿæ—¥å¿«ä¹
      </h1>

      <h2 class="layer-depth-2">æ„¿ä½ çš„ä¸–ç•Œæ°¸è¿œé—ªé—ªå‘å…‰ âœ¨</h2>

      <div class="cake layer-depth-3">ğŸ‚</div>

      <div class="typewriter layer-depth-2" id="typewriter"></div>
      <div class="sub-text layer-depth-1" id="sub-text"></div>

      <div class="footer layer-depth-0">
        <span id="today-text"></span>
      </div>
    </div>
  </div>

  <script>
    // ========= æ‰“å­—æœºæ•ˆæœ =========
    const mainText =
      "æ„¿ä½ çœ¼é‡Œæ€»æœ‰å…‰èŠ’ï¼Œ\n" +
      "å¿ƒä¸­æ€»å­˜çƒ­çˆ±ã€‚\n" +
      "ä¸å¿…å¾ˆå®Œç¾ï¼Œä½†ä¸€å®šè¦å¾ˆå¿«ä¹ã€‚";

    const subText =
      "Fromï¼šä¸€ä¸ªä¸€ç›´åœ¨ä¸ºä½ å‡†å¤‡æƒŠå–œçš„äºº ğŸ’Œ";

    const typewriterEl = document.getElementById("typewriter");
    const subTextEl = document.getElementById("sub-text");

    let index = 0;
    function typeWriter() {
      if (index <= mainText.length) {
        typewriterEl.textContent = mainText.slice(0, index);
        const char = mainText.charAt(index);
        index++;
        const delay = (char === "ï¼Œ" || char === "ã€‚" || char === "\n") ? 180 : 70;
        setTimeout(typeWriter, delay);
      } else {
        setTimeout(() => {
          subTextEl.textContent = subText;
        }, 450);
      }
    }
    typeWriter();

    // ========= æ—¥æœŸ & ç”Ÿæ—¥æç¤º =========
    const todaySpan = document.getElementById("today-text");
    const now = new Date();
    const year = now.getFullYear();
    const month = now.getMonth() + 1;
    const day = now.getDate();

    const pad = n => (n < 10 ? "0" + n : "" + n);
    const todayStr = `${year}-${pad(month)}-${pad(day)}`;

    if (month === 12 && day === 25) {
      todaySpan.textContent = `ä»Šå¤©æ˜¯ ${todayStr}ï¼Œå¶æ˜Ÿæ˜Ÿçš„ç”Ÿæ—¥ï¼Œæ„¿ä½ æ‰€æœ‰çš„æ„¿æœ›éƒ½èƒ½ä¸€ç‚¹ç‚¹å®ç° âœ¨`;
    } else {
      todaySpan.textContent = `ä»Šå¤©æ˜¯ ${todayStr}ï¼ŒæŠŠè¿™ä»½é¡µé¢å½“æˆæå‰/å»¶åçš„æƒŠå–œç¥ç¦å§ ğŸ’«`;
    }

    // ========= å¤šå½© 3D çº¸å±‘ =========
    const confettiContainer = document.getElementById("confetti-container");
    const confettiColors = [
      "linear-gradient(180deg, #fff, #ffd6a5)",
      "linear-gradient(180deg, #fff, #ffadad)",
      "linear-gradient(180deg, #fff, #caffbf)",
      "linear-gradient(180deg, #fff, #9bf6ff)",
      "linear-gradient(180deg, #fff, #bdb2ff)"
    ];

    function createConfettiPiece() {
      const piece = document.createElement("span");
      piece.className = "confetti";

      const sizeW = 6 + Math.random() * 6;
      const sizeH = 10 + Math.random() * 12;
      piece.style.width = sizeW + "px";
      piece.style.height = sizeH + "px";

      const left = Math.random() * 100;
      piece.style.left = left + "vw";

      piece.style.animationDuration = (4 + Math.random() * 4) + "s";
      piece.style.animationDelay = (-Math.random() * 6) + "s";

      piece.style.backgroundImage =
        confettiColors[Math.floor(Math.random() * confettiColors.length)];

      confettiContainer.appendChild(piece);
    }

    for (let i = 0; i < 80; i++) {
      createConfettiPiece();
    }

    // ========= 3D å¡ç‰‡è·Ÿéšé¼ æ ‡å€¾æ–œ =========
    const scene = document.getElementById("scene");
    const card = document.getElementById("card3d");

    scene.addEventListener("mousemove", (e) => {
      const rect = scene.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const midX = rect.width / 2;
      const midY = rect.height / 2;

      const maxRotate = 14; // æœ€å¤§æ—‹è½¬è§’åº¦
      const rotateY = ((x - midX) / midX) * maxRotate;   // å·¦å³
      const rotateX = (-(y - midY) / midY) * maxRotate;  // ä¸Šä¸‹

      card.style.transform =
        `rotateX(${rotateX.toFixed(2)}deg) rotateY(${rotateY.toFixed(2)}deg)`;
      card.style.boxShadow =
        `${-rotateY * 1.5}px ${18 + rotateX * 0.8}px 45px rgba(0,0,0,0.45)`;
    });

    scene.addEventListener("mouseleave", () => {
      card.style.transform = "rotateX(0deg) rotateY(0deg)";
      card.style.boxShadow =
        "0 22px 45px rgba(0,0,0,0.35), 0 0 20px rgba(255,255,255,0.4)";
    });

    // ========= ç²’å­å…‰æ•ˆ =========
    const particleCanvas = document.getElementById("particles");
    const pCtx = particleCanvas.getContext("2d");

    let pWidth = window.innerWidth;
    let pHeight = window.innerHeight;

    function resizeParticles() {
      pWidth = window.innerWidth;
      pHeight = window.innerHeight;
      particleCanvas.width = pWidth;
      particleCanvas.height = pHeight;
    }
    resizeParticles();
    window.addEventListener("resize", resizeParticles);

    const particles = [];
    const particleCount = 130;

    function randomParticle() {
      const angle = Math.random() * Math.PI * 2;
      const speed = 0.15 + Math.random() * 0.45; // px / å¸§
      const radius = 1.2 + Math.random() * 2.4;
      const colorType = Math.floor(Math.random() * 3);
      let color;
      // ç²‰ã€è“ã€é‡‘ä¸‰ç§ä¸»è‰²ç³»
      if (colorType === 0) color = { r: 255, g: 183, b: 213 };
      else if (colorType === 1) color = { r: 178, g: 235, b: 242 };
      else color = { r: 255, g: 235, b: 148 };

      return {
        x: Math.random() * pWidth,
        y: Math.random() * pHeight,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        r: radius,
        alpha: 0.3 + Math.random() * 0.7,
        color
      };
    }

    for (let i = 0; i < particleCount; i++) {
      particles.push(randomParticle());
    }

    function drawParticles() {
      // åŠé€æ˜é®ç½©åšæ‹–å°¾
      pCtx.fillStyle = "rgba(2, 6, 23, 0.18)";
      pCtx.fillRect(0, 0, pWidth, pHeight);

      // ç²’å­
      for (let i = 0; i < particles.length; i++) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;

        // è½»å¾®å‘ä¸Šæ¼‚æµ®ï¼šè®©ç”Ÿæ—¥æ„Ÿæ›´â€œå‡è…¾â€
        p.y -= 0.03;

        // å‡ºç•Œé‡æ–°éšæœº
        if (p.x < -50 || p.x > pWidth + 50 || p.y < -50 || p.y > pHeight + 50) {
          particles[i] = randomParticle();
          continue;
        }

        const gx = p.x;
        const gy = p.y;
        const gr = p.r * 4;

        const gradient = pCtx.createRadialGradient(gx, gy, 0, gx, gy, gr);
        gradient.addColorStop(0, `rgba(${p.color.r},${p.color.g},${p.color.b},${p.alpha})`);
        gradient.addColorStop(1, `rgba(${p.color.r},${p.color.g},${p.color.b},0)`);

        pCtx.beginPath();
        pCtx.fillStyle = gradient;
        pCtx.arc(gx, gy, gr, 0, Math.PI * 2);
        pCtx.fill();
      }

      // ç²’å­ä¹‹é—´çš„è¿çº¿
      pCtx.lineWidth = 0.4;
      for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < particles.length; j++) {
          const p1 = particles[i];
          const p2 = particles[j];
          const dx = p1.x - p2.x;
          const dy = p1.y - p2.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          const maxDist = 90;
          if (dist < maxDist) {
            const alpha = (1 - dist / maxDist) * 0.28;
            pCtx.strokeStyle = `rgba(255,255,255,${alpha.toFixed(3)})`;
            pCtx.beginPath();
            pCtx.moveTo(p1.x, p1.y);
            pCtx.lineTo(p2.x, p2.y);
            pCtx.stroke();
          }
        }
      }

      requestAnimationFrame(drawParticles);
    }

    drawParticles();
  </script>
</body>
</html>
